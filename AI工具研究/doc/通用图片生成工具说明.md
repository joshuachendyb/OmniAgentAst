# 通用图片生成工具使用说明

**创建时间**: 2026-02-10 17:00:00  
**工具名称**: image_generator.py  
**依赖**: matplotlib + numpy + pillow (纯Python，不依赖canvas-design)  

---

## 一、工具定位

**独立运行的通用图片生成工具**，不依赖任何特殊skill，仅用标准Python库即可工作。

### 核心特性

| 特性 | 支持 | 说明 |
|------|------|------|
| **格式** | PNG, JPG | 自动转换，JPG支持质量设置 |
| **分辨率** | 任意DPI | 默认300DPI，可自定义 |
| **尺寸** | 任意像素 | 默认1920x1080，支持任意宽高 |
| **颜色模式** | 彩色/黑白 | 一键切换 |
| **风格** | 4种预设 | 现代、科技、优雅、极简 |

### 风格定位

✅ **生成内容**:  
- 创意图形、几何设计  
- 渐变背景、精致排版  
- 专业封面、商务配图  
- 高精度、形象化设计  

❌ **不生成**:  
- 卡通图片  
- 简单勾线图  
- 手绘风格  
- 低幼化设计  

---

## 二、安装依赖

```bash
pip install matplotlib numpy pillow
```

**依赖说明**:
- `matplotlib`: 核心绘图库
- `numpy`: 数值计算（渐变、数组操作）
- `pillow`: 图片格式转换（PNG↔JPG）

---

## 三、基础使用

### 3.1 最简单用法

```python
from image_generator import ImageGenerator

# 创建生成器
gen = ImageGenerator()

# 生成封面
gen.generate_cover(
    title='文档标题',
    subtitle='副标题说明',
    output_path='封面.png',
    format='png'
)
```

### 3.2 自定义参数

```python
gen = ImageGenerator(
    width=3840,      # 4K宽度
    height=2160,     # 4K高度
    dpi=300,         # 打印级分辨率
    color_mode='color',  # 'color'或'bw'(黑白)
    style='tech'     # 'modern'/'tech'/'elegant'/'minimal'
)

gen.generate_cover(
    title='系统架构设计',
    subtitle='System Architecture Design',
    output_path='封面.jpg',  # JPG格式
    format='jpg',
    quality=95          # JPG质量(1-100)
)
```

---

## 四、参数详解

### 4.1 ImageGenerator初始化参数

| 参数 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| `width` | int | 1920 | 图片宽度(像素) |
| `height` | int | 1080 | 图片高度(像素) |
| `dpi` | int | 300 | 分辨率(每英寸点数) |
| `color_mode` | str | 'color' | 'color'(彩色)或'bw'(黑白) |
| `style` | str | 'modern' | 风格: modern/tech/elegant/minimal |

### 4.2 generate_cover方法参数

| 参数 | 类型 | 必需 | 说明 |
|------|------|------|------|
| `title` | str | 是 | 主标题文字 |
| `subtitle` | str | 否 | 副标题文字(默认空) |
| `output_path` | str | 是 | 输出文件路径 |
| `format` | str | 是 | 'png'或'jpg' |
| `quality` | int | 否 | JPG质量1-100(默认95) |

---

## 五、风格说明

### 5.1 modern（现代风格）

**特点**: 蓝色系渐变、简洁几何、商务感  
**配色**: 深蓝#1e3a5f、亮蓝#3498db、翠绿#2ecc71  
**适用**: 技术文档、产品手册、企业报告

### 5.2 tech（科技风格）

**特点**: 深色背景、网格点装饰、未来感  
**配色**: 深空蓝#0f172a、科技蓝#3b82f6、青色#06b6d4  
**适用**: API文档、开发者指南、技术白皮书

### 5.3 elegant（优雅风格）

**特点**: 暖色调、金色点缀、高级感  
**配色**: 深棕#2c1810、赭石#8b4513、金色#d4af37  
**适用**: 品牌手册、高端产品、艺术画册

### 5.4 minimal（极简风格）

**特点**: 灰度配色、大量留白、克制设计  
**配色**: 炭灰#2c3e50、银灰#7f8c8d、浅灰#bdc3c7  
**适用**: 设计规范、极简主义文档、概念展示

---

## 六、完整示例

### 示例1: 生成4K高清彩色封面

```python
from image_generator import ImageGenerator

gen = ImageGenerator(
    width=3840,
    height=2160,
    dpi=300,
    color_mode='color',
    style='tech'
)

gen.generate_cover(
    title='Dynamic Context Pruning',
    subtitle='v2.0.2 Documentation',
    output_path='DCP_Cover_4K.png',
    format='png'
)
```

### 示例2: 生成黑白打印版

```python
gen = ImageGenerator(
    width=2480,  # A4 300DPI宽度
    height=3508, # A4 300DPI高度
    dpi=300,
    color_mode='bw',
    style='minimal'
)

gen.generate_cover(
    title='设计规范文档',
    subtitle='Design System Guidelines',
    output_path='cover_bw.jpg',
    format='jpg',
    quality=90
)
```

### 示例3: 批量生成多种风格

```python
gen = ImageGenerator(width=1920, height=1080, dpi=300)

styles = ['modern', 'tech', 'elegant', 'minimal']
for style in styles:
    gen = ImageGenerator(width=1920, height=1080, dpi=300, style=style)
    gen.generate_cover(
        title='产品发布会',
        subtitle='Product Launch 2026',
        output_path=f'cover_{style}.png',
        format='png'
    )
```

---

## 七、最佳实践

### 7.1 防prune设置

工具已内置防prune措施:
```python
import warnings
warnings.filterwarnings('ignore')
import matplotlib
matplotlib.use('Agg')
```

**DCP配置建议**:
```json
{
  "tools": {
    "prune": {"permission": "deny"}
  }
}
```

### 7.2 尺寸建议

| 用途 | 推荐尺寸 | DPI |
|------|----------|-----|
| 网页封面 | 1920x1080 | 150 |
| 打印A4 | 2480x3508 | 300 |
| 打印A3 | 3508x4961 | 300 |
| PPT封面 | 1920x1080 | 150 |
| 4K展示 | 3840x2160 | 300 |

### 7.3 格式选择

- **PNG**: 需要透明背景、无损质量、屏幕显示
- **JPG**: 需要小文件、网页使用、打印（照片类）

---

## 八、工具文件位置

```
doc/
├── image_generator.py          # 通用图片生成工具（本工具）
├── 封面图/                      # 生成的图片存放目录
│   ├── DCP_Cover_01_TechGradient_1920x1080.png
│   └── ...
└── 封面图生成经验总结.md        # 经验总结文档
```

---

## 九、扩展开发

如需添加新功能，可修改 `image_generator.py`:

1. **添加新方法**: 在`ImageGenerator`类中添加`generate_xxx()`方法
2. **自定义配色**: 在`_setup_colors()`中添加新风格
3. **复杂图形**: 使用`matplotlib.patches`绘制更多几何元素

**示例**: 添加圆形装饰
```python
circle = Circle((x, y), radius, facecolor=color, alpha=0.7)
ax.add_patch(circle)
```

---

## 十、故障排除

| 问题 | 原因 | 解决 |
|------|------|------|
| 中文显示为方框 | 缺少中文字体 | 安装SimHei或使用英文 |
| 生成的图片模糊 | DPI设置过低 | 设置dpi=300或更高 |
| JPG背景变黑 | 透明通道问题 | 已自动处理，无需担心 |
| 触发prune | 警告输出 | 已内置过滤，如仍触发则临时禁用prune |

---

**更新时间**: 2026-02-10 17:00:00  
**版本**: v1.0  
**维护**: OpenCode AI助手
