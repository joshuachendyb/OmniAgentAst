# 配置对比分析

## 我之前建议的配置 vs 官方README说明

### 我之前的配置建议
```json
{
  "tools": {
    "prune": { "permission": "ask" },
    "distill": { "permission": "allow" },
    "compress": { "permission": "deny" }
  },
  "strategies": {
    "deduplication": { "enabled": false },
    "supersedeWrites": { "enabled": false },
    "purgeErrors": { "enabled": true, "turns": 10 }
  }
}
```

### 官方README说明的默认行为
```json
{
  // 没有具体配置说明，但指出：
  // 1. 三个工具都提供（distill, compress, prune）
  // 2. 三个策略都自动运行（每轮都执行）
  // 3. 没有提到如何控制权限和策略开关
}
```

## 关键差异点

### 1. 权限控制
- **我的建议**：明确设置每个工具的权限
- **官方README**：没有提到权限控制，暗示默认都允许

### 2. 策略开关
- **我的建议**：关闭deduplication和supersedeWrites
- **官方README**：没有提到可以关闭，暗示都自动运行

### 3. 错误清理轮次
- **我的建议**：设置为10轮
- **官方README**：没有提到轮次设置

## 版本差异

### 你的实际环境
- **安装来源**：npm包 @tarquinen/opencode-dcp
- **版本号**：2.0.2（比GitHub的2.0.0更新）
- **工具名**：prune, distill, compress（与README一致）

### 仓库关系
- **npm包仓库**：https://github.com/Tarquinen/opencode-dynamic-context-pruning
- **README仓库**：https://github.com/Opencode-DCP/opencode-dynamic-context-pruning
- **注意**：这是两个不同的仓库！
  - npm包指向Tarquinen的个人仓库
  - README来自Opencode-DCP组织仓库

## 真正的问题来源

### 可能的情况
1. **仓库分叉**：Tarquinen fork了Opencode-DCP的代码，并发布到npm
2. **版本不同步**：两个仓库的更新不同步
3. **功能差异**：npm版本可能增加了配置选项，而组织版本还没有更新README

## 需要检查的关键点

### 查看实际源码配置选项
- 检查dist/index.js中实际支持的配置字段
- 确认我的建议配置是否真的有效

### 查看schema文件
- 获取官方配置结构定义
- 确认哪些选项是真实存在的

---

**结论**：
1. 你用的是npm 2.0.2版本（Tarquinen的仓库）
2. 官方README来自Opencode-DCP组织（2.0.0版本）
3. 可能存在两个仓库之间的差异
4. 需要以实际安装的源码为准

---

**下一步**：
1. 查看实际源码支持的配置选项
2. 查看schema文件确认配置结构
3. 基于实际支持的选项更新配置

---

**分析时间**：2026-02-10 当前时间