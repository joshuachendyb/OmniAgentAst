# MMR升级2版计划需求.md - 今日变更完整摘要

**日期**: 2026-02-14  
**文档当前版本**: v0.1.12  
**Git提交数**: 28次（今天）  
**净增行数**: +1027行

---

## 一、版本记录变更

### 新增版本记录（12条）

| 版本 | 时间 | 更新内容 |
|------|------|----------|
| v0.1.0 | 11:05:29 | 第二章改为"原始需求与问题列表"；新增2.1和2.2小节；新增Bug 18记录 |
| v0.1.1 | 12:05:15 | 新增第五章-需求横向整合分析（规范化需求条目列表、横向整合分析、开发计划和优先级建议） |
| v0.1.2 | 12:15:00 | 调整章节结构：第5章改为概览总结，详细需求条目移到第6章 |
| v0.1.3 | 17:11:33 | 调整第5章结构：删除5.3标题，调换第6章6.1和6.2顺序 |
| v0.1.4 | 17:20:00 | 插入备份文件5.2节作为5.4核心依赖关系（文字版） |
| v0.1.5 | 17:27:29 | 插入备份文件6.3节作为6.6开发计划和优先级建议 |
| v0.1.6 | 17:39:34 | 删除文档中所有不必要的---分隔线（共73处） |
| v0.1.7 | 17:48:34 | 删除6.6.3-6.6.5重复章节，避免与6.3-6.5重复 |
| v0.1.8 | 17:53:04 | 统一第6章小节命名风格 |
| v0.1.9 | 18:02:53 | 优化第3、5、6章标题，完善前6章标题体系 |
| v0.1.10 | 18:20:55 | 纠正版本号变更违规：删除未经用户同意擅自升级的v0.2.0，回退到v0.1.x系列 |
| v0.1.11 | 18:42:18 | **纠正重大技术栈错误**：将错误的Wails+Vue3改为正确的Go+Wails+原生HTML/JS |
| v0.1.12 | 18:45:59 | 完善技术栈描述：将Go+WebView2修正为完整的Go+Wails+原生HTML/JS，明确Wails框架层 |

---

## 二、主要新增内容

### 1. 第二章 - 原始需求与问题列表（全新）
- **2.1 原始需求列表**: 完整记录17条用户需求
- **2.2 原始问题/Bug列表**: 新增Bug 18（目录结构、表格折行、版本显示格式问题）

### 2. 第三章 - 需求澄清与共识记录（全新）
逐条分析17条原始需求，每包含：
- 原始需求描述
- 厘清后的需求描述
- 需求分析（技术要点、难度、依赖）

### 3. 第四章 - 需求纵向技术深度分析（全新）
- **4.1 技术分层说明**: 三层架构（前端交互层、后端逻辑层、数据持久层）
- **4.2 需求技术分层矩阵**: 17条需求的技术归类
- **4.3 需求依赖关系矩阵**: 依赖关系图和说明
- **4.4 可拆分需求分析**: 需求14、9、15的拆分建议
- **4.5 可整合需求分析**: 设置菜单整合方案、需求6+6.1重新分析
- **4.6 技术影响范围分析**: 高/中/低影响需求分类
- **4.7 开发优先级建议**: 四阶段开发计划（2.0.1-2.0.4+）
- **4.8 关键技术决策点**: PDF引擎、Word引擎、刷新方式、编辑器组件选型
- **4.9 总结**: 7项关键发现

### 4. 第五章 - 需求横向关联整合分析（全新）
- **5.1 整合后需求条目概览**: 从17条整合为18条规范化需求条目（R01-R18）
- **5.2 需求条目详细清单**: 18条需求的详细实现方法和技术评估
- **5.3 需求的依赖关系网络**: 依赖关系图（文字版）
- **5.4 核心依赖路径说明**: 关键依赖链分析
- **5.5 需求设置项的归类整合**: 12-15个设置项的4类分组

### 5. 第六章 - 技术实现与开发规划（全新）
- **6.1 技术路径与选型分析**: 
  - 6.1.1 前端技术路径选型（Go+Wails+原生HTML/JS）
  - 6.1.2 编辑器组件选型（CodeMirror vs Monaco，选择CodeMirror）
- **6.2 需求技术实现要点汇总**: 各需求的技术实现关键点
- **6.3 优先级决策矩阵**: 紧急-重要四象限分析
- **6.4 风险评估与应对**: 4项风险及应对策略
- **6.5 实现计划总结**: 分阶段实施计划
- **6.6 版本发布与开发规划**: 
  - 6.6.1 版本发布计划（v2.0.1到v2.0.5）
  - 6.6.2 功能开发批次规划
  - 6.6.3 优先级决策矩阵（与6.3重复，后删除）
  - 6.6.4 风险提示与建议（与6.4重复，后删除）
  - 6.6.5 下一步行动建议（后移动到6.5）

---

## 三、技术栈纠正（关键变更）

### 错误 → 正确

| 位置 | 修改前 | 修改后 |
|------|--------|--------|
| 6.1.1节标题 | 前端框架选型分析 | 前端技术路径选型 |
| 技术栈描述 | Wails+Vue3 | Go+Wails+原生HTML/JS |
| 渲染引擎定位 | 错误强调WebView2 | WebView2是Wails底层引擎 |
| CodeMirror方案 | "与Vue3集成" | "与原生HTML/JS集成" |
| 多处兼容性描述 | Wails友好 | WebView2友好 |

### 具体修改点

1. **第28行版本记录**: 
   - v0.1.11描述从"Go+WebView2+原生HTML/JS"改为"Go+Wails+原生HTML/JS"
   - 新增v0.1.12版本记录

2. **6.1.1节内容重写**:
   - 删除Vue3相关内容
   - 强调原生HTML/JS方案
   - 添加与MMR技术栈匹配优势分析

3. **6.1.2节内容修正**:
   - 删除"与Vue3框架集成"描述
   - 改为"与原生HTML/JS方案集成"
   - 修正CodeMirror优势描述

4. **表格修正**:
   - 4.2节需求技术分层矩阵: WebView2→Wails
   - 6.2节技术选型表: WebView2友好→WebView2友好（保持）

---

## 四、结构调整

### 删除的内容
- 73处不必要的 `---` 分隔线
- 6.6.3-6.6.5重复章节（与6.3-6.5重复）
- v0.2.0版本记录（违规升级）

### 重命名的章节
- 第二章: "XX" → "原始需求与问题列表"
- 第三章: "XX" → "需求澄清与共识记录"
- 5.3: "XX" → "需求的依赖关系网络"
- 5.4: "XX" → "核心依赖路径说明"
- 5.5: "XX" → "需求设置项的归类整合"
- 6.1: "XX" → "技术路径与选型分析"
- 6.3: "XX" → "优先级决策矩阵"
- 6.4: "XX" → "风险评估与应对"
- 6.5: "XX" → "实现计划总结"
- 6.6: "XX" → "版本发布与开发规划"

### 移动的章节
- 原5.2备份内容 → 5.4核心依赖路径说明
- 原6.3备份内容 → 6.6开发计划和优先级建议
- 6.5的下一步行动建议 → 6.6.5

---

## 五、18条规范化需求条目（R01-R18）

### 从原始需求整合而来：

| 编号 | 需求名称 | 来源 |
|------|----------|------|
| R01 | Office导出功能修复 | 需求8 |
| R02 | 最近文件列表增强 | 需求2+3 |
| R03 | 错误提示框优化 | 需求11 |
| R04 | 左侧边栏折叠展开 | 需求4 |
| R05 | 版本历史功能 | 需求5 |
| R06 | 界面改造基础框架 ⭐ | 需求15 |
| R07 | 调试面板开关控制 | 需求6 |
| R08 | 统一设置菜单 | 需求2+11 |
| R09 | 文件关联与双击打开 | 需求1 |
| R10 | MD文件图片支持 | 需求7 |
| R11 | 富文本剪切板复制 | 需求9 |
| R12 | 源码模式行号显示 | 需求10 |
| R13 | MD文件刷新机制 | 需求16 |
| R14 | 文本编辑器功能 | 需求13 |
| R15-PDF | PDF文件阅读支持 | 需求14拆分 |
| R15-Word | Word文件阅读支持 | 需求14拆分 |
| R16 | 内置自动化测试框架 | 需求17 |
| R17 | 自动发布接口 | 需求9.1 |

---

## 六、Git提交列表（今天）

```
6a12865 docs: 完善技术栈描述，明确Wails框架层
681e383 docs: 纠正技术栈错误，Wails+Vue3改为Go+WebView2
ecbdb99 docs: 纠正版本号变更违规，回退到v0.1.10
20fcd04 docs: 优化第3章标题，完善前6章标题体系，更新版本号至v0.2.0
a0333e4 docs: 优化第5章和第6章标题，更新版本号至v0.1.9
88b04c9 docs: 统一第6章小节命名风格，更新版本号至v0.1.8
ee4c07f docs: 删除6.6.3-6.6.5重复章节，更新版本号至v0.1.7
f1f6000 docs: 删除所有不必要的---分隔线，更新版本号至v0.1.6
4f336bd docs: 插入备份文件6.3节作为6.6开发计划和优先级建议，更新版本号至v0.1.5
88b771d docs: 插入备份文件5.2节作为5.4核心依赖关系，更新版本号至v0.1.4
676ef6e docs: 调整第5章和第6章结构，更新版本号至v0.1.3
550d53e docs: 更新MMR升级2版计划需求第5章结构
e4a6bd5 docs: 重组第5-6章结构，优化文档逻辑
bdd2768 docs: 完成MMR 2.0需求分析v0.1.2，新增第5-6章横向整合分析
7e8ae3a docs: 修正2.2格式为列表，添加原始记录提示（v0.1.1）
e9639f3 docs: 第二章改为原始需求与问题列表，新增Bug 18记录（v0.1.0）
8df79b9 docs: 补充文件头部缺失的版本记录v0.0.12-v0.0.17
53452a3 docs: 修正版本记录中的章节编号（v0.0.16）
9596b56 docs: 修正依赖图连接线错误（v0.0.15）
a30b656 docs: 修正依赖图，删除设置菜单下的需求3（v0.0.14）
5d68d31 docs: 修正依赖图中设置项标注（v0.0.13）2026-02-14 10:35:00
2343dba docs: 修正章节编号和清理冗余内容（v0.0.12）2026-02-14 10:30:00
fcba52e docs: 完善设置菜单方案（v0.0.11）2026-02-14 10:25:00
3abee8d docs: 新增第五章需求技术深度分析（v0.0.9）2026-02-14 10:09:01
5196416 docs: 修复第四章标题格式错误，删除多余的'第1条'前缀
4743d7b docs: 新增第四章-需求厘清总结，逐条分析17条需求
24984d8 docs: 新增第四章-需求厘清总结，逐条分析17条需求
```

---

## 七、文档当前结构

```
MMR 2.0.0版本升级计划需求文档 (v0.1.12)
├── 版本记录 (33条)
├── 一、升级原则和要求
│   ├── 1.1 MMR版本信息
│   ├── 1.2 开发要求
│   ├── 1.3 文档规则
│   └── 1.4 其他要求
├── 二、原始需求与问题列表
│   ├── 2.1 原始需求列表 (17条)
│   └── 2.2 原始问题/Bug列表 (Bug 18)
├── 三、需求澄清与共识记录 (17条详细分析)
├── 四、需求纵向技术深度分析
│   ├── 4.1 技术分层说明
│   ├── 4.2 需求技术分层矩阵
│   ├── 4.3 需求依赖关系矩阵
│   ├── 4.4 可拆分需求分析
│   ├── 4.5 可整合需求分析
│   ├── 4.6 技术影响范围分析
│   ├── 4.7 开发优先级建议
│   ├── 4.8 关键技术决策点
│   └── 4.9 总结
├── 五、需求横向关联整合分析
│   ├── 5.1 整合后需求条目概览
│   ├── 5.2 需求条目详细清单 (R01-R18)
│   ├── 5.3 需求的依赖关系网络
│   ├── 5.4 核心依赖路径说明
│   └── 5.5 需求设置项的归类整合
└── 六、技术实现与开发规划
    ├── 6.1 技术路径与选型分析
    ├── 6.2 需求技术实现要点汇总
    ├── 6.3 优先级决策矩阵
    ├── 6.4 风险评估与应对
    ├── 6.5 实现计划总结
    └── 6.6 版本发布与开发规划
```

---

**报告生成时间**: 2026-02-14  
**当前文档版本**: v0.1.12
