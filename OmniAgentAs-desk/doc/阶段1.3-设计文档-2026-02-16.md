# Phase 1.3: ReAct æ‰§è¡Œå™¨å®ç° - è®¾è®¡æ–‡æ¡£

**æ–‡æ¡£ç¼–å·**: OMA-DESIGN-103  
**é˜¶æ®µ**: 1.3  
**é˜¶æ®µåç§°**: ReAct æ‰§è¡Œå™¨å®ç°ï¼ˆæ ¸å¿ƒï¼‰  
**åˆ›å»ºæ—¶é—´**: 2026-02-16 09:05:06  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**è®¾è®¡çŠ¶æ€**: ğŸŸ¡ å¾…æ‰¹å‡†  

---

## 1. é˜¶æ®µç›®æ ‡

### 1.1 æ€»ä½“ç›®æ ‡
å®ç° OmniAgentAst çš„æ ¸å¿ƒæ™ºèƒ½æ‰§è¡Œå¼•æ“â€”â€”**ReAct (Reasoning + Acting) å¾ªç¯**ï¼Œä½¿ Agent å…·å¤‡è‡ªä¸»æ€è€ƒå’Œæ‰§è¡Œèƒ½åŠ›ã€‚

### 1.2 å…·ä½“ç›®æ ‡
1. **å·¥å…·æ¡†æ¶**: å»ºç«‹å¯æ‰©å±•çš„å·¥å…·å®šä¹‰å’Œæ³¨å†Œæœºåˆ¶
2. **P0 å·¥å…·é›†**: å®ç° 4 ä¸ªåŸºç¡€æ–‡ä»¶æ“ä½œå·¥å…·
3. **ReAct å¾ªç¯**: å®ç° æ€è€ƒâ†’è¡ŒåŠ¨â†’è§‚å¯Ÿ çš„å®Œæ•´é—­ç¯
4. **é”™è¯¯æ¢å¤**: å®ç° 3 æ¬¡é‡è¯•æœºåˆ¶å’ŒåŸºç¡€é”™è¯¯å¤„ç†

### 1.3 ä¸ Phase 1.2 çš„å…³ç³»
```
Phase 1.2 (AIæ¨¡å‹æ¥å…¥) â†’ Phase 1.3 (ReActæ‰§è¡Œå™¨) â†’ Phase 1.4 (å¯¹è¯ç•Œé¢)
      æä¾›AIèƒ½åŠ›            å®ç°æ™ºèƒ½æ‰§è¡Œ               æä¾›ç”¨æˆ·äº¤äº’
```

---

## 2. æŠ€æœ¯æ–¹æ¡ˆ

### 2.1 æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ReAct æ‰§è¡Œå™¨æ¶æ„                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Thought   â”‚ --> â”‚   Action    â”‚ --> â”‚Observation â”‚   â”‚
â”‚  â”‚   (æ€è€ƒ)    â”‚     â”‚   (è¡ŒåŠ¨)    â”‚     â”‚  (è§‚å¯Ÿ)     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â†‘                                            â”‚      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                          (åé¦ˆå¾ªç¯)                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    å·¥å…·å±‚ (Tool Layer)               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚read_file â”‚ â”‚write_fileâ”‚ â”‚list_dir  â”‚ â”‚move_file â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ ¸å¿ƒç»„ä»¶

#### 2.2.1 å·¥å…·å®šä¹‰ Schema

æ¯ä¸ªå·¥å…·å¿…é¡»éµå¾ªä»¥ä¸‹ Schemaï¼š

```python
{
    "name": "å·¥å…·åç§°",                    # å¿…é¡»æ˜¯è‹±æ–‡ï¼Œä¸‹åˆ’çº¿åˆ†éš”
    "description": "åŠŸèƒ½æè¿°",              # ç»™ AI çœ‹çš„æè¿°
    "parameters": {
        "param1": {
            "type": "string",              # å‚æ•°ç±»å‹
            "description": "å‚æ•°æè¿°",      # å‚æ•°è¯´æ˜
            "required": True,              # æ˜¯å¦å¿…éœ€
            "default": None                # é»˜è®¤å€¼
        }
    },
    "returns": {
        "type": "object",
        "description": "è¿”å›ç»“æœè¯´æ˜"
    },
    "danger_level": "low|medium|high",     # é£é™©ç­‰çº§
    "examples": [                          # ä½¿ç”¨ç¤ºä¾‹
        {
            "input": {"path": "/tmp/test.txt"},
            "output": {"content": "æ–‡ä»¶å†…å®¹...", "success": True}
        }
    ]
}
```

#### 2.2.2 å·¥å…·åŸºç±»è®¾è®¡

```python
# app/tools/base.py
from abc import ABC, abstractmethod
from typing import Any, Dict, Optional
from pydantic import BaseModel, Field

class ToolParameter(BaseModel):
    """å·¥å…·å‚æ•°å®šä¹‰"""
    type: str
    description: str
    required: bool = True
    default: Optional[Any] = None

class ToolDefinition(BaseModel):
    """å·¥å…·å®šä¹‰Schema"""
    name: str
    description: str
    parameters: Dict[str, ToolParameter]
    returns: Dict[str, Any]
    danger_level: str = "low"  # low, medium, high
    examples: list = []

class ToolResult(BaseModel):
    """å·¥å…·æ‰§è¡Œç»“æœ"""
    success: bool
    data: Optional[Any] = None
    error: Optional[str] = None
    execution_time: float = 0.0

class BaseTool(ABC):
    """å·¥å…·åŸºç±»"""
    
    def __init__(self):
        self.definition = self._get_definition()
    
    @abstractmethod
    def _get_definition(self) -> ToolDefinition:
        """è¿”å›å·¥å…·å®šä¹‰"""
        pass
    
    @abstractmethod
    async def execute(self, **kwargs) -> ToolResult:
        """æ‰§è¡Œå·¥å…·"""
        pass
    
    def validate_params(self, params: Dict[str, Any]) -> bool:
        """éªŒè¯å‚æ•°æ˜¯å¦åˆæ³•"""
        # æ£€æŸ¥å¿…éœ€å‚æ•°
        for name, param in self.definition.parameters.items():
            if param.required and name not in params:
                return False
        return True
```

#### 2.2.3 P0 å·¥å…·å®ç°æ¸…å•

| å·¥å…· | åŠŸèƒ½ | é£é™©ç­‰çº§ | å…³é”®å‚æ•° | è¿”å›å€¼ |
|------|------|---------|---------|--------|
| **read_file** | è¯»å–æ–‡ä»¶å†…å®¹ | ğŸŸ¢ low | path: æ–‡ä»¶è·¯å¾„ | content: æ–‡ä»¶å†…å®¹ |
| **write_file** | å†™å…¥/åˆ›å»ºæ–‡ä»¶ | ğŸŸ¡ medium | path, content, mode | success: æ˜¯å¦æˆåŠŸ |
| **list_directory** | åˆ—å‡ºç›®å½•å†…å®¹ | ğŸŸ¢ low | path, recursive | files: æ–‡ä»¶åˆ—è¡¨ |
| **move_file** | ç§»åŠ¨/é‡å‘½å | ğŸŸ¡ medium | source, destination | success: æ˜¯å¦æˆåŠŸ |

#### 2.2.4 ReAct å¾ªç¯æ ¸å¿ƒ

```python
# app/core/react_executor.py
from typing import List, Dict, Any, Optional
import json

class ReActExecutor:
    """ReAct æ‰§è¡Œå™¨ï¼šæ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿå¾ªç¯"""
    
    def __init__(self, ai_service, tool_registry):
        self.ai = ai_service
        self.tools = tool_registry
        self.max_iterations = 10  # æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œé˜²æ­¢æ­»å¾ªç¯
        self.retry_attempts = 3   # é”™è¯¯é‡è¯•æ¬¡æ•°
    
    async def execute(self, user_input: str, history: List[Dict] = None) -> Dict[str, Any]:
        """
        æ‰§è¡Œ ReAct å¾ªç¯
        
        Args:
            user_input: ç”¨æˆ·è¾“å…¥
            history: å†å²æ¶ˆæ¯
            
        Returns:
            æ‰§è¡Œç»“æœ
        """
        iterations = 0
        context = {
            "user_input": user_input,
            "thoughts": [],
            "actions": [],
            "observations": []
        }
        
        while iterations < self.max_iterations:
            iterations += 1
            
            # Step 1: Thought (æ€è€ƒ)
            thought = await self._think(context, history)
            context["thoughts"].append(thought)
            
            # æ£€æŸ¥æ˜¯å¦åº”è¯¥ç»“æŸ
            if thought.get("should_stop", False):
                return {
                    "success": True,
                    "answer": thought.get("answer", ""),
                    "context": context
                }
            
            # Step 2: Action (è¡ŒåŠ¨)
            action = thought.get("action")
            if not action:
                continue
                
            context["actions"].append(action)
            
            # Step 3: Observation (è§‚å¯Ÿ)
            observation = await self._act(action)
            context["observations"].append(observation)
            
            # å¦‚æœæ‰§è¡Œå¤±è´¥ï¼Œå°è¯•é‡è¯•
            if not observation.get("success", False):
                for attempt in range(self.retry_attempts):
                    retry_observation = await self._retry_action(action, observation, attempt)
                    if retry_observation.get("success", False):
                        observation = retry_observation
                        break
        
        # è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œå¼ºåˆ¶ç»“æŸ
        return {
            "success": False,
            "error": "è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°",
            "context": context
        }
    
    async def _think(self, context: Dict, history: List[Dict]) -> Dict:
        """
        æ€è€ƒé˜¶æ®µï¼šè°ƒç”¨ AI å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨
        
        è¿”å›æ ¼å¼ï¼š
        {
            "thought": "æ€è€ƒè¿‡ç¨‹...",
            "action": {"tool": "tool_name", "params": {...}},
            "should_stop": false,
            "answer": ""  # åªæœ‰åœ¨ should_stop=true æ—¶æ‰æœ‰å€¼
        }
        """
        # æ„å»º prompt
        prompt = self._build_think_prompt(context, history)
        
        # è°ƒç”¨ AI
        response = await self.ai.chat(prompt)
        
        # è§£æå“åº”
        return self._parse_thought_response(response)
    
    async def _act(self, action: Dict) -> Dict:
        """
        è¡ŒåŠ¨é˜¶æ®µï¼šæ‰§è¡Œå·¥å…·
        
        Args:
            action: {"tool": "tool_name", "params": {...}}
        """
        tool_name = action.get("tool")
        params = action.get("params", {})
        
        # æŸ¥æ‰¾å·¥å…·
        tool = self.tools.get(tool_name)
        if not tool:
            return {
                "success": False,
                "error": f"æœªçŸ¥å·¥å…·: {tool_name}"
            }
        
        # æ‰§è¡Œå·¥å…·
        try:
            result = await tool.execute(**params)
            return {
                "success": result.success,
                "data": result.data,
                "error": result.error
            }
        except Exception as e:
            return {
                "success": False,
                "error": str(e)
            }
    
    async def _retry_action(self, action: Dict, last_error: Dict, attempt: int) -> Dict:
        """é‡è¯•å¤±è´¥çš„è¡ŒåŠ¨"""
        # å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ é‡è¯•é€»è¾‘ï¼Œæ¯”å¦‚ä¿®æ”¹å‚æ•°ã€æ¢ç”¨å…¶ä»–å·¥å…·ç­‰
        return await self._act(action)
    
    def _build_think_prompt(self, context: Dict, history: List[Dict]) -> str:
        """æ„å»ºæ€è€ƒé˜¶æ®µçš„ prompt"""
        tools_desc = self.tools.get_tools_description()
        
        prompt = f"""ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ï¼Œéœ€è¦æ ¹æ®ç”¨æˆ·è¾“å…¥å’Œä¸Šä¸‹æ–‡å†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚

å¯ç”¨å·¥å…·ï¼š
{tools_desc}

ç”¨æˆ·è¾“å…¥ï¼š{context['user_input']}

å†å²æ€è€ƒï¼š
{self._format_thoughts(context['thoughts'])}

å†å²è¡ŒåŠ¨ï¼š
{self._format_actions(context['actions'])}

å†å²è§‚å¯Ÿï¼š
{self._format_observations(context['observations'])}

è¯·å†³å®šä¸‹ä¸€æ­¥ï¼š
1. å¦‚æœä»»åŠ¡å·²å®Œæˆï¼Œè¾“å‡ºæœ€ç»ˆç­”æ¡ˆ
2. å¦‚æœéœ€è¦ä½¿ç”¨å·¥å…·ï¼Œè¾“å‡ºå·¥å…·è°ƒç”¨

è¯·æŒ‰ä»¥ä¸‹æ ¼å¼å“åº”ï¼š
{{
    "thought": "ä½ çš„æ€è€ƒè¿‡ç¨‹",
    "action": {{"tool": "å·¥å…·å", "params": {{"å‚æ•°å": "å‚æ•°å€¼"}}}},
    "should_stop": false,
    "answer": ""
}}
"""
        return prompt
```

### 2.3 å·¥å…·æ³¨å†Œæœºåˆ¶

```python
# app/tools/registry.py
from typing import Dict, Type
from .base import BaseTool

class ToolRegistry:
    """å·¥å…·æ³¨å†Œè¡¨"""
    
    _tools: Dict[str, BaseTool] = {}
    
    @classmethod
    def register(cls, tool_instance: BaseTool):
        """æ³¨å†Œå·¥å…·"""
        name = tool_instance.definition.name
        cls._tools[name] = tool_instance
        print(f"[ToolRegistry] æ³¨å†Œå·¥å…·: {name}")
    
    @classmethod
    def get(cls, name: str) -> BaseTool:
        """è·å–å·¥å…·"""
        return cls._tools.get(name)
    
    @classmethod
    def list_tools(cls) -> list:
        """åˆ—å‡ºæ‰€æœ‰å·¥å…·"""
        return list(cls._tools.keys())
    
    @classmethod
    def get_tools_description(cls) -> str:
        """è·å–æ‰€æœ‰å·¥å…·çš„æè¿°ï¼ˆç”¨äº promptï¼‰"""
        descriptions = []
        for name, tool in cls._tools.items():
            desc = f"- {name}: {tool.definition.description}"
            descriptions.append(desc)
        return "\n".join(descriptions)

# æ³¨å†Œè£…é¥°å™¨
def register_tool():
    """å·¥å…·æ³¨å†Œè£…é¥°å™¨"""
    def decorator(tool_class: Type[BaseTool]):
        instance = tool_class()
        ToolRegistry.register(instance)
        return tool_class
    return decorator
```

---

## 3. æ•°æ®ç»“æ„è®¾è®¡

### 3.1 æ¶ˆæ¯å†å²

```python
# app/models/message.py
from pydantic import BaseModel
from typing import List, Optional
from datetime import datetime

class Message(BaseModel):
    """æ¶ˆæ¯æ¨¡å‹"""
    role: str  # "user", "assistant", "system", "tool"
    content: str
    tool_calls: Optional[List[Dict]] = None
    tool_results: Optional[List[Dict]] = None
    timestamp: datetime = datetime.now()
```

### 3.2 æ‰§è¡Œä¸Šä¸‹æ–‡

```python
# app/models/execution.py
from pydantic import BaseModel
from typing import List, Dict, Any, Optional

class ExecutionContext(BaseModel):
    """æ‰§è¡Œä¸Šä¸‹æ–‡"""
    user_input: str
    thoughts: List[Dict] = []
    actions: List[Dict] = []
    observations: List[Dict] = []
    final_answer: Optional[str] = None
    success: bool = False
    error: Optional[str] = None
```

---

## 4. éªŒæ”¶æ ‡å‡†

### 4.1 åŠŸèƒ½éªŒæ”¶

| éªŒæ”¶é¡¹ | éªŒæ”¶æ ‡å‡† | éªŒè¯æ–¹æ³• |
|--------|---------|---------|
| **å·¥å…·æ³¨å†Œ** | 4ä¸ª P0 å·¥å…·éƒ½èƒ½æ­£ç¡®æ³¨å†Œ | è°ƒç”¨ `ToolRegistry.list_tools()` éªŒè¯ |
| **read_file** | èƒ½è¯»å–æ–‡æœ¬æ–‡ä»¶å¹¶è¿”å›å†…å®¹ | å•å…ƒæµ‹è¯•ï¼šè¯»å–æµ‹è¯•æ–‡ä»¶ |
| **write_file** | èƒ½åˆ›å»ºæ–‡ä»¶å¹¶å†™å…¥å†…å®¹ | å•å…ƒæµ‹è¯•ï¼šå†™å…¥åè¯»å–éªŒè¯ |
| **list_directory** | èƒ½åˆ—å‡ºç›®å½•ä¸­çš„æ–‡ä»¶ | å•å…ƒæµ‹è¯•ï¼šå¯¹æ¯” os.listdir |
| **move_file** | èƒ½ç§»åŠ¨/é‡å‘½åæ–‡ä»¶ | å•å…ƒæµ‹è¯•ï¼šç§»åŠ¨åéªŒè¯ |
| **ReActå¾ªç¯** | èƒ½å®Œæˆè‡³å°‘3è½®æ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿ | é›†æˆæµ‹è¯•ï¼šæ¨¡æ‹Ÿå¤æ‚ä»»åŠ¡ |
| **é”™è¯¯é‡è¯•** | å¤±è´¥3æ¬¡åæ‰æŠ¥é”™ | å•å…ƒæµ‹è¯•ï¼šæ¨¡æ‹Ÿå¤±è´¥åœºæ™¯ |

### 4.2 æ€§èƒ½éªŒæ”¶

| æŒ‡æ ‡ | è¦æ±‚ | æµ‹è¯•æ–¹æ³• |
|------|------|---------|
| å·¥å…·æ‰§è¡Œæ—¶é—´ | < 100ms | å•å…ƒæµ‹è¯•è®¡æ—¶ |
| ReActå•æ¬¡è¿­ä»£ | < 5s (å«AIè°ƒç”¨) | é›†æˆæµ‹è¯•è®¡æ—¶ |
| å†…å­˜å ç”¨ | < 50MB | è¿è¡Œæ—¶ç›‘æ§ |

### 4.3 è´¨é‡éªŒæ”¶

- [ ] **æµ‹è¯•è¦†ç›–ç‡**: â‰¥ 80%
- [ ] **ä»£ç å®¡æŸ¥**: æ— ä¸¥é‡é—®é¢˜
- [ ] **æ–‡æ¡£å®Œæ•´æ€§**: æ‰€æœ‰å·¥å…·éƒ½æœ‰ä½¿ç”¨è¯´æ˜
- [ ] **é”™è¯¯å¤„ç†**: æ‰€æœ‰å¼‚å¸¸éƒ½æœ‰åˆé€‚çš„é”™è¯¯æç¤º

---

## 5. é£é™©é¢„ä¼°

### 5.1 æŠ€æœ¯é£é™©

| é£é™© | å¯èƒ½æ€§ | å½±å“ | åº”å¯¹æªæ–½ |
|------|--------|------|---------|
| AI ä¸è¾“å‡ºæ ‡å‡†æ ¼å¼ | ä¸­ | é«˜ | æ·»åŠ æ ¼å¼æ ¡éªŒå’Œé‡è¯•æœºåˆ¶ |
| å·¥å…·æ‰§è¡Œæƒé™ä¸è¶³ | ä¸­ | é«˜ | æ·»åŠ æƒé™æ£€æŸ¥å’Œå‹å¥½æç¤º |
| æ–‡ä»¶æ“ä½œå¼‚å¸¸ï¼ˆå ç”¨ç­‰ï¼‰ | ä¸­ | ä¸­ | æ·»åŠ å¼‚å¸¸å¤„ç†å’Œé‡è¯• |
| æ­»å¾ªç¯é£é™© | ä½ | é«˜ | è®¾ç½® max_iterations é™åˆ¶ |

### 5.2 ä¾èµ–é£é™©

| ä¾èµ– | é£é™©æè¿° | åº”å¯¹æªæ–½ |
|------|---------|---------|
| Phase 1.2 | AI æœåŠ¡ä¸ç¨³å®š | ä½¿ç”¨ OpenCode ä½œä¸ºå¤‡é€‰ |
| æ–‡ä»¶ç³»ç»Ÿ | Windows è·¯å¾„é—®é¢˜ | ä½¿ç”¨ pathlib å¤„ç†è·¨å¹³å° |

---

## 6. å®æ–½è®¡åˆ’

### 6.1 å¼€å‘é¡ºåº

```
Day 1-2: å·¥å…·æ¡†æ¶
  â”œâ”€ å·¥å…·åŸºç±» (BaseTool)
  â”œâ”€ å·¥å…·æ³¨å†Œè¡¨ (ToolRegistry)
  â””â”€ å·¥å…·å®šä¹‰ Schema

Day 3-4: P0 å·¥å…·å®ç°
  â”œâ”€ read_file
  â”œâ”€ write_file
  â”œâ”€ list_directory
  â””â”€ move_file

Day 5-6: ReAct æ ¸å¿ƒ
  â”œâ”€ ReActExecutor æ¡†æ¶
  â”œâ”€ Think é˜¶æ®µå®ç°
  â”œâ”€ Act é˜¶æ®µå®ç°
  â””â”€ Observation é˜¶æ®µå®ç°

Day 7: æµ‹è¯•å’Œæ–‡æ¡£
  â”œâ”€ å•å…ƒæµ‹è¯• (è¦†ç›–ç‡â‰¥80%)
  â”œâ”€ é›†æˆæµ‹è¯•
  â”œâ”€ å·¥å…·ä½¿ç”¨æ–‡æ¡£
  â””â”€ é˜¶æ®µæ€»ç»“
```

### 6.2 æ–‡ä»¶æ¸…å•

**æ–°å¢æ–‡ä»¶**:
- `app/tools/base.py` - å·¥å…·åŸºç±»å’Œå®šä¹‰
- `app/tools/registry.py` - å·¥å…·æ³¨å†Œè¡¨
- `app/tools/file_tools.py` - æ–‡ä»¶æ“ä½œå·¥å…·
- `app/core/react_executor.py` - ReAct æ‰§è¡Œå™¨
- `app/models/message.py` - æ¶ˆæ¯æ¨¡å‹
- `app/models/execution.py` - æ‰§è¡Œä¸Šä¸‹æ–‡æ¨¡å‹
- `tests/test_tools.py` - å·¥å…·å•å…ƒæµ‹è¯•
- `tests/test_react.py` - ReAct é›†æˆæµ‹è¯•

**ä¿®æ”¹æ–‡ä»¶**:
- `app/main.py` - æ³¨å†Œå·¥å…·å’Œ ReAct æ‰§è¡Œå™¨
- `app/api/v1/chat.py` - é›†æˆ ReAct åˆ°å¯¹è¯æ¥å£

---

## 7. å‚è€ƒèµ„æ–™

### 7.1 è®¾è®¡å‚è€ƒ
- ReAct è®ºæ–‡: *ReAct: Synergizing Reasoning and Acting in Language Models*
- åŸç‰ˆ `AI_OSShell_v2.py` ä¸­çš„å·¥å…·è°ƒç”¨é€»è¾‘
- ã€Šå¼€å‘ç­–ç•¥è§„èŒƒ v2.1ã€‹ç¬¬ 12.3 èŠ‚ ReAct Executor å®ç°è§„èŒƒ

### 7.2 æŠ€æœ¯å‚è€ƒ
- Pydantic æ–‡æ¡£: https://docs.pydantic.dev/
- Python `pathlib` æ¨¡å—æ–‡æ¡£

---

## 8. è®¾è®¡è¯„å®¡

### 8.1 è‡ªæ£€æ¸…å•

- [x] å·¥å…· Schema è®¾è®¡æ˜¯å¦åˆç†ï¼Ÿ
- [x] ReAct å¾ªç¯æ˜¯å¦èƒ½é˜²æ­¢æ­»å¾ªç¯ï¼Ÿ
- [x] é”™è¯¯å¤„ç†æœºåˆ¶æ˜¯å¦å®Œå–„ï¼Ÿ
- [x] æ˜¯å¦è€ƒè™‘äº†æƒé™å’Œå®‰å…¨é—®é¢˜ï¼Ÿ
- [x] æµ‹è¯•è®¡åˆ’æ˜¯å¦å®Œæ•´ï¼Ÿ

### 8.2 å¾…ç¡®è®¤é—®é¢˜

1. **å·¥å…·å‚æ•°éªŒè¯**: æ˜¯å¦éœ€è¦æ›´ä¸¥æ ¼çš„å‚æ•°æ ¡éªŒï¼ˆå¦‚è·¯å¾„åˆæ³•æ€§æ£€æŸ¥ï¼‰ï¼Ÿ
2. **AI Prompt**: ReAct çš„ prompt æ¨¡æ¿æ˜¯å¦éœ€è¦ç”¨æˆ·å¯é…ç½®ï¼Ÿ
3. **æ‰§è¡Œè¶…æ—¶**: æ•´ä¸ª ReAct å¾ªç¯æ˜¯å¦éœ€è¦æ€»è¶…æ—¶é™åˆ¶ï¼Ÿ

---

## 9. ä¿®è®¢å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®è®¢äºº | ä¿®è®¢å†…å®¹ |
|------|------|--------|---------|
| v1.0 | 2026-02-16 09:05:06 | AIåŠ©æ‰‹å°æ¬§ | åˆå§‹ç‰ˆæœ¬ï¼ŒPhase 1.3 è®¾è®¡æ–‡æ¡£ |

---

**æ–‡æ¡£ç»“æŸ**

**ç”¨æˆ·ç¡®è®¤**:
- [ ] å·²é˜…è¯»å…¨æ–‡
- [ ] ç†è§£æŠ€æœ¯æ–¹æ¡ˆ
- [ ] è®¤å¯éªŒæ”¶æ ‡å‡†
- [ ] æ‰¹å‡†è¿›å…¥å¼€å‘é˜¶æ®µ

**ç¡®è®¤äºº**: _______________  
**ç¡®è®¤æ—¥æœŸ**: YYYY-MM-DD
