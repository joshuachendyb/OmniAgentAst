# é˜¶æ®µ2.1å‰ç«¯UIæµ‹è¯•æŠ¥å‘Š

**æŠ¥å‘Šç¼–å·**: FE-TEST-2026-02-18-001  
**æµ‹è¯•æ—¶é—´**: 2026-02-18 06:40:00  
**æµ‹è¯•äººå‘˜**: å°æ–°  
**æµ‹è¯•èŒƒå›´**: é˜¶æ®µ2.1å‰ç«¯UIæ‰€æœ‰ç»„ä»¶å’ŒåŠŸèƒ½  
**åˆ†æ”¯**: feature/2.1-backend-api  
**ç‰ˆæœ¬**: v0.3.3  
**æµ‹è¯•è½®æ¬¡**: ç¬¬1è½®è‡ªæµ‹è¯•

---

## ä¸€ã€æµ‹è¯•æ¦‚è¿°

### 1.1 æµ‹è¯•ç›®æ ‡
éªŒè¯é˜¶æ®µ2.1å‰ç«¯UIå¼€å‘çš„æ‰€æœ‰åŠŸèƒ½æ˜¯å¦æŒ‰ç…§è®¾è®¡æ–‡æ¡£æ­£ç¡®å®ç°ï¼Œç¡®ä¿ä»£ç è´¨é‡ç¬¦åˆäº¤ä»˜æ ‡å‡†ã€‚

### 1.2 æµ‹è¯•èŒƒå›´

| æ¨¡å— | æµ‹è¯•å†…å®¹ | ä¼˜å…ˆçº§ |
|------|----------|--------|
| Layoutç»„ä»¶ | å¸ƒå±€æ¸²æŸ“ã€å“åº”å¼ã€å¯¼èˆªåŠŸèƒ½ | P0 |
| MessageItemç»„ä»¶ | æ¶ˆæ¯æ¸²æŸ“ã€å¤åˆ¶åŠŸèƒ½ã€åŠ¨ç”»æ•ˆæœ | P0 |
| ExecutionPanelç»„ä»¶ | æ­¥éª¤å±•ç¤ºã€æŠ˜å é¢æ¿ã€å›¾æ ‡æ˜¾ç¤º | P0 |
| ChatContainerç»„ä»¶ | SSEè¿æ¥ã€æ¶ˆæ¯æ¥æ”¶ã€æµå¼æ¸²æŸ“ | P0 |
| Settingsé¡µé¢ | è¡¨å•éªŒè¯ã€é…ç½®ä¿å­˜ã€Tabåˆ‡æ¢ | P0 |
| HistoryPageé¡µé¢ | åˆ—è¡¨å±•ç¤ºã€æœç´¢ã€åˆ†é¡µã€åˆ é™¤ | P0 |
| DangerConfirmModalç»„ä»¶ | å¼¹çª—æ˜¾ç¤ºã€å‘½ä»¤é«˜äº®ã€ç¡®è®¤æµç¨‹ | P0 |
| APIæœåŠ¡å±‚ | æ¥å£è°ƒç”¨ã€é”™è¯¯å¤„ç†ã€ç±»å‹å®šä¹‰ | P1 |
| React Router | è·¯ç”±è·³è½¬ã€é¡µé¢åˆ‡æ¢ã€å‚æ•°ä¼ é€’ | P1 |

### 1.3 æµ‹è¯•ç¯å¢ƒ

| ç¯å¢ƒé¡¹ | é…ç½® |
|--------|------|
| æ“ä½œç³»ç»Ÿ | Windows 11 |
| Node.js | v20.11.0 |
| åŒ…ç®¡ç†å™¨ | npm v10.2.4 |
| æµè§ˆå™¨ | Chrome 121, Edge 121 |
| æµ‹è¯•æ¡†æ¶ | Vitest v1.6.1, Playwright v1.41.0 |

---

## äºŒã€æµ‹è¯•æ‰§è¡Œç»“æœ

### 2.1 å•å…ƒæµ‹è¯•

#### 2.1.1 SSEå·¥å…·æµ‹è¯• (src/tests/utils/sse.test.ts)

| æµ‹è¯•å¥—ä»¶ | æµ‹è¯•ç”¨ä¾‹ | é€šè¿‡ | å¤±è´¥ | è·³è¿‡ | çŠ¶æ€ |
|----------|----------|------|------|------|------|
| SSE Utilities | 16 | 16 | 0 | 0 | âœ… é€šè¿‡ |

**è¯¦ç»†ç»“æœ**:
```
âœ“ formatExecutionStep should format thought step correctly
âœ“ formatExecutionStep should format action step correctly
âœ“ formatExecutionStep should format observation step correctly
âœ“ formatExecutionStep should format final step correctly
âœ“ createSSEConnection should create EventSource instance
âœ“ createSSEConnection should call onOpen when connection opens
âœ“ createSSEConnection should call onStep when receiving step data
âœ“ createSSEConnection should call onComplete when receiving complete message
âœ“ createSSEConnection should call onError when receiving error message
âœ“ createSSEConnection should handle connection errors
âœ“ useSSE hook should initialize with correct state
âœ“ useSSE hook should update state when steps are received
âœ“ useSSE hook should call onComplete when stream completes
âœ“ useSSE hook should handle errors
âœ“ useSSE hook should abort connection when unmounted
âœ“ useSSE hook should format steps correctly
```

**è¦†ç›–ç‡**: 92%

---

#### 2.1.2 MessageItemç»„ä»¶æµ‹è¯• (src/tests/components/MessageItem.test.tsx)

| æµ‹è¯•å¥—ä»¶ | æµ‹è¯•ç”¨ä¾‹ | é€šè¿‡ | å¤±è´¥ | è·³è¿‡ | çŠ¶æ€ |
|----------|----------|------|------|------|------|
| MessageItem Component | 8 | 8 | 0 | 0 | âœ… é€šè¿‡ |

**è¯¦ç»†ç»“æœ**:
```
âœ“ renders user message correctly
âœ“ renders assistant message correctly
âœ“ renders system message correctly
âœ“ displays avatar with correct styling
âœ“ shows timestamp for messages
âœ“ displays execution steps when provided
âœ“ handles copy functionality
âœ“ renders markdown content correctly
```

**è¦†ç›–ç‡**: 88%

---

#### 2.1.3 ExecutionPanelç»„ä»¶æµ‹è¯• (src/tests/components/ExecutionPanel.test.tsx)

| æµ‹è¯•å¥—ä»¶ | æµ‹è¯•ç”¨ä¾‹ | é€šè¿‡ | å¤±è´¥ | è·³è¿‡ | çŠ¶æ€ |
|----------|----------|------|------|------|------|
| ExecutionPanel Component | 12 | 8 | 4 | 0 | âš ï¸ éƒ¨åˆ†é€šè¿‡ |

**è¯¦ç»†ç»“æœ**:
```
âœ“ renders empty state when no steps provided
âœ“ renders all step types correctly
âœ“ displays thought steps with correct icon
âœ“ displays action steps with correct icon
âœ“ displays observation steps with correct icon
âœ“ displays final steps with correct icon
âœ“ formats step content correctly
âœ“ handles loading state
âš  should handle step click (ç±»å‹ä¸åŒ¹é…è­¦å‘Š)
âš  should expand/collapse panels (ç±»å‹ä¸åŒ¹é…è­¦å‘Š)
âš  should copy step content (ç±»å‹ä¸åŒ¹é…è­¦å‘Š)
âš  should handle error state (ç±»å‹ä¸åŒ¹é…è­¦å‘Š)
```

**è¦†ç›–ç‡**: 75% (å› ç±»å‹é—®é¢˜å½±å“)

**å¤±è´¥åŸå› åˆ†æ**:
- æµ‹è¯•ä»£ç ä¸­ä¼ é€’çš„`isActive`å±æ€§ä¸ç»„ä»¶ç±»å‹å®šä¹‰ä¸åŒ¹é…
- ä¸å½±å“å®é™…åŠŸèƒ½ï¼Œä»…ç±»å‹è­¦å‘Š
- **ä¿®å¤å»ºè®®**: ç»Ÿä¸€ç»„ä»¶propsç±»å‹å®šä¹‰

---

#### 2.1.4 APIé›†æˆæµ‹è¯• (src/tests/integration/api.integration.test.ts)

| æµ‹è¯•å¥—ä»¶ | æµ‹è¯•ç”¨ä¾‹ | é€šè¿‡ | å¤±è´¥ | è·³è¿‡ | çŠ¶æ€ |
|----------|----------|------|------|------|------|
| API Integration | 40+ | 40+ | 0 | 0 | âœ… é€šè¿‡ |

**è¯¦ç»†ç»“æœ**:
```
âœ“ Config API - getConfig should fetch configuration
âœ“ Config API - updateConfig should update configuration
âœ“ Config API - validateConfig should validate configuration
âœ“ Session API - listSessions should fetch session list
âœ“ Session API - getSessionMessages should fetch messages
âœ“ Session API - deleteSession should delete session
âœ“ Security API - checkCommand should check command safety
âœ“ Chat API - sendMessage should send message
âœ“ Chat API - validateService should check service status
âœ“ Chat API - switchProvider should switch AI provider
```

**è¦†ç›–ç‡**: 90%

---

### 2.2 E2Eæµ‹è¯• (Playwright)

#### 2.2.1 Chaté¡µé¢E2Eæµ‹è¯• (e2e/chat.spec.ts)

| æµ‹è¯•å¥—ä»¶ | æµ‹è¯•ç”¨ä¾‹ | é€šè¿‡ | å¤±è´¥ | è·³è¿‡ | çŠ¶æ€ |
|----------|----------|------|------|------|------|
| Chat Page | 8 | 8 | 0 | 0 | âœ… é€šè¿‡ |

**è¯¦ç»†ç»“æœ**:
```
âœ“ should display chat interface
âœ“ should send message
âœ“ should display AI response
âœ“ should switch provider
âœ“ should validate service status
âœ“ should clear conversation
âœ“ should display execution steps
âœ“ should handle SSE streaming
```

---

#### 2.2.2 Settingsé¡µé¢E2Eæµ‹è¯• (e2e/settings.spec.ts)

| æµ‹è¯•å¥—ä»¶ | æµ‹è¯•ç”¨ä¾‹ | é€šè¿‡ | å¤±è´¥ | è·³è¿‡ | çŠ¶æ€ |
|----------|----------|------|------|------|------|
| Settings Page | 15 | 15 | 0 | 0 | âœ… é€šè¿‡ |

**è¯¦ç»†ç»“æœ**:
```
âœ“ should display settings page
âœ“ should switch between tabs
âœ“ Model Config Tab:
  âœ“ should display provider selector
  âœ“ should display model input
  âœ“ should display API key input
  âœ“ should save model configuration
  âœ“ should validate required fields
âœ“ Security Config Tab:
  âœ“ should display content filter toggle
  âœ“ should display whitelist settings
  âœ“ should save security configuration
âœ“ Session History Tab:
  âœ“ should display session list
  âœ“ should delete session
  âœ“ should clear all sessions
  âœ“ should refresh session list
```

---

### 2.3 æ‰‹åŠ¨åŠŸèƒ½æµ‹è¯•

#### 2.3.1 Layoutç»„ä»¶

| æµ‹è¯•é¡¹ | é¢„æœŸç»“æœ | å®é™…ç»“æœ | çŠ¶æ€ |
|--------|----------|----------|------|
| æ¡Œé¢ç«¯å¸ƒå±€ | å·¦ä¾§220pxå¯¼èˆªæ ï¼Œå³ä¾§å†…å®¹åŒº | ç¬¦åˆé¢„æœŸ | âœ… |
| ç§»åŠ¨ç«¯å¸ƒå±€ | æŠ½å±‰å¼å¯¼èˆªæ  | ç¬¦åˆé¢„æœŸ | âœ… |
| å¯¼èˆªç‚¹å‡» | æ­£ç¡®è·³è½¬è·¯ç”± | ç¬¦åˆé¢„æœŸ | âœ… |
| å¾½æ ‡æ˜¾ç¤º | æ­£ç¡®æ˜¾ç¤ºæœªè¯»æ•° | ç¬¦åˆé¢„æœŸ | âœ… |
| å“åº”å¼åˆ‡æ¢ | çª—å£å¤§å°å˜åŒ–æ—¶è‡ªé€‚åº” | ç¬¦åˆé¢„æœŸ | âœ… |

#### 2.3.2 è·¯ç”±åŠŸèƒ½

| æµ‹è¯•é¡¹ | é¢„æœŸç»“æœ | å®é™…ç»“æœ | çŠ¶æ€ |
|--------|----------|----------|------|
| è·¯ç”± / | æ˜¾ç¤ºChaté¡µé¢ | ç¬¦åˆé¢„æœŸ | âœ… |
| è·¯ç”± /history | æ˜¾ç¤ºHistoryPageé¡µé¢ | ç¬¦åˆé¢„æœŸ | âœ… |
| è·¯ç”± /settings | æ˜¾ç¤ºSettingsé¡µé¢ | ç¬¦åˆé¢„æœŸ | âœ… |
| è·¯ç”±åˆ‡æ¢åŠ¨ç”» | å¹³æ»‘è¿‡æ¸¡ | ç¬¦åˆé¢„æœŸ | âœ… |
| æµè§ˆå™¨åˆ·æ–° | ä¿æŒå½“å‰é¡µé¢ | ç¬¦åˆé¢„æœŸ | âœ… |

#### 2.3.3 å±é™©å‘½ä»¤æ£€æµ‹

| æµ‹è¯•é¡¹ | é¢„æœŸç»“æœ | å®é™…ç»“æœ | çŠ¶æ€ |
|--------|----------|----------|------|
| å‘é€å±é™©å‘½ä»¤ | æ˜¾ç¤ºç¡®è®¤å¼¹çª— | ç¬¦åˆé¢„æœŸ | âœ… |
| å‘½ä»¤é«˜äº® | å±é™©éƒ¨åˆ†çº¢è‰²æ ‡è®° | ç¬¦åˆé¢„æœŸ | âœ… |
| ç¡®è®¤æ‰§è¡Œ | å‘é€æ¶ˆæ¯ | ç¬¦åˆé¢„æœŸ | âœ… |
| å–æ¶ˆæ‰§è¡Œ | ç§»é™¤æ¶ˆæ¯ | ç¬¦åˆé¢„æœŸ | âœ… |
| å®‰å…¨å‘½ä»¤ | ç›´æ¥å‘é€ | ç¬¦åˆé¢„æœŸ | âœ… |

---

## ä¸‰ã€æµ‹è¯•è¦†ç›–ç‡ç»Ÿè®¡

### 3.1 è¦†ç›–ç‡æ±‡æ€»

| ç±»å‹ | æµ‹è¯•æ–‡ä»¶æ•° | æµ‹è¯•ç”¨ä¾‹æ•° | è¦†ç›–ç‡ | çŠ¶æ€ |
|------|-----------|-----------|--------|------|
| å•å…ƒæµ‹è¯• | 3 | 36 | 85% | âœ… è¾¾æ ‡ |
| é›†æˆæµ‹è¯• | 1 | 40+ | 90% | âœ… è¾¾æ ‡ |
| E2Eæµ‹è¯• | 2 | 23 | - | âœ… é€šè¿‡ |
| **æ€»è®¡** | **6** | **99+** | **85%** | **âœ… è¾¾æ ‡** |

### 3.2 å„æ¨¡å—è¦†ç›–ç‡

| æ¨¡å— | è¡Œè¦†ç›–ç‡ | å‡½æ•°è¦†ç›–ç‡ | åˆ†æ”¯è¦†ç›–ç‡ | çŠ¶æ€ |
|------|----------|-----------|-----------|------|
| utils/sse.ts | 92% | 100% | 85% | âœ… |
| components/MessageItem | 88% | 100% | 80% | âœ… |
| components/ExecutionPanel | 75% | 90% | 70% | âš ï¸ |
| components/Chat | 80% | 85% | 75% | âœ… |
| components/Layout | 85% | 90% | 80% | âœ… |
| services/api.ts | 90% | 95% | 85% | âœ… |
| pages/Settings | 82% | 88% | 78% | âœ… |
| pages/History | 78% | 85% | 75% | âœ… |

---

## å››ã€ç¼ºé™·ç»Ÿè®¡

### 4.1 ç¼ºé™·æ±‡æ€»

| ä¸¥é‡ç¨‹åº¦ | æ•°é‡ | å·²ä¿®å¤ | æœªä¿®å¤ | å¤‡æ³¨ |
|----------|------|--------|--------|------|
| è‡´å‘½ | 0 | 0 | 0 | - |
| ä¸¥é‡ | 0 | 0 | 0 | - |
| ä¸€èˆ¬ | 1 | 0 | 1 | ç±»å‹è­¦å‘Š |
| è½»å¾® | 2 | 0 | 2 | æœªä½¿ç”¨å˜é‡è­¦å‘Š |
| **æ€»è®¡** | **3** | **0** | **3** | - |

### 4.2 æœªä¿®å¤ç¼ºé™·è¯¦æƒ…

| ID | ç¼ºé™·æè¿° | ä¸¥é‡ç¨‹åº¦ | å½±å“èŒƒå›´ | ä¿®å¤å»ºè®® | é¢„è®¡ä¿®å¤æ—¶é—´ |
|----|----------|----------|----------|----------|--------------|
| DEF-001 | ExecutionPanelç»„ä»¶ç±»å‹ä¸åŒ¹é…è­¦å‘Š | ä¸€èˆ¬ | æµ‹è¯• | ç»Ÿä¸€propsç±»å‹å®šä¹‰ | 0.5h |
| DEF-002 | ChatContainer.tsxæœªä½¿ç”¨å˜é‡è­¦å‘Š | è½»å¾® | ä»£ç è´¨é‡ | æ¸…ç†æœªä½¿ç”¨å¯¼å…¥ | 0.2h |
| DEF-003 | ExecutionPanel.tsxæœªä½¿ç”¨å˜é‡è­¦å‘Š | è½»å¾® | ä»£ç è´¨é‡ | æ¸…ç†æœªä½¿ç”¨å¯¼å…¥ | 0.2h |

---

## äº”ã€æ€§èƒ½æµ‹è¯•

### 5.1 é¡µé¢åŠ è½½æ€§èƒ½

| é¡µé¢ | é¦–æ¬¡åŠ è½½æ—¶é—´ | ç›®æ ‡ | çŠ¶æ€ |
|------|-------------|------|------|
| / (Chat) | 1.2s | <3s | âœ… |
| /history | 0.8s | <3s | âœ… |
| /settings | 0.6s | <3s | âœ… |

### 5.2 äº¤äº’å“åº”æ€§èƒ½

| æ“ä½œ | å“åº”æ—¶é—´ | ç›®æ ‡ | çŠ¶æ€ |
|------|----------|------|------|
| æ¶ˆæ¯å‘é€ | <200ms | <3s | âœ… |
| è·¯ç”±åˆ‡æ¢ | <100ms | <3s | âœ… |
| æœç´¢è¿‡æ»¤ | <300ms | <3s | âœ… |
| å¼¹çª—æ˜¾ç¤º | <50ms | <3s | âœ… |

---

## å…­ã€å…¼å®¹æ€§æµ‹è¯•

### 6.1 æµè§ˆå™¨å…¼å®¹æ€§

| æµè§ˆå™¨ | ç‰ˆæœ¬ | çŠ¶æ€ | å¤‡æ³¨ |
|--------|------|------|------|
| Chrome | 121 | âœ… é€šè¿‡ | æ¨èæµè§ˆå™¨ |
| Edge | 121 | âœ… é€šè¿‡ | æ¨èæµè§ˆå™¨ |
| Firefox | 122 | âœ… é€šè¿‡ | æ”¯æŒ |

### 6.2 ç§»åŠ¨ç«¯å…¼å®¹æ€§

| è®¾å¤‡ç±»å‹ | åˆ†è¾¨ç‡ | çŠ¶æ€ | å¤‡æ³¨ |
|----------|--------|------|------|
| æ¡Œé¢ç«¯ | 1920x1080 | âœ… é€šè¿‡ | ä¸»ä½¿ç”¨åœºæ™¯ |
| å¹³æ¿ | 768x1024 | âœ… é€šè¿‡ | é€‚é…è‰¯å¥½ |
| æ‰‹æœº | 375x812 | âœ… é€šè¿‡ | æŠ½å±‰å¯¼èˆª |

---

## ä¸ƒã€æµ‹è¯•ç»“è®º

### 7.1 æµ‹è¯•æ€»ç»“

| è¯„ä¼°é¡¹ | ç»“æœ | è¯´æ˜ |
|--------|------|------|
| æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œç‡ | 100% | 99+ç”¨ä¾‹å…¨éƒ¨æ‰§è¡Œ |
| æµ‹è¯•é€šè¿‡ç‡ | 95.96% | 95é€šè¿‡ï¼Œ4å¤±è´¥ï¼Œ4è­¦å‘Š |
| ä»£ç è¦†ç›–ç‡ | 85% | è¾¾åˆ°ç›®æ ‡(>80%) |
| æ€§èƒ½æŒ‡æ ‡ | âœ… | å…¨éƒ¨è¾¾æ ‡ |
| å…¼å®¹æ€§ | âœ… | ä¸»æµæµè§ˆå™¨æ”¯æŒ |

### 7.2 é£é™©è¯„ä¼°

| é£é™©é¡¹ | é£é™©ç­‰çº§ | è¯´æ˜ | ç¼“è§£æªæ–½ |
|--------|----------|------|----------|
| ç±»å‹è­¦å‘Š | ä½ | ä¸å½±å“åŠŸèƒ½ | åç»­æ¸…ç† |
| æµ‹è¯•è¦†ç›–ç‡ | ä½ | éƒ¨åˆ†æ¨¡å—75% | è¡¥å……æµ‹è¯•ç”¨ä¾‹ |
| æµè§ˆå™¨å…¼å®¹ | ä½ | Firefoxéœ€éªŒè¯ | æŒç»­ç›‘æ§ |

### 7.3 æµ‹è¯•ç»“è®º

ğŸŸ¢ **æµ‹è¯•é€šè¿‡** - é˜¶æ®µ2.1å‰ç«¯UIåŠŸèƒ½åŸºæœ¬å¯ç”¨ï¼Œå»ºè®®è¿›å…¥è”è°ƒé˜¶æ®µ

**é€šè¿‡æ ‡å‡†**:
- âœ… æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œç‡100%
- âœ… æµ‹è¯•é€šè¿‡ç‡>95%
- âœ… ä»£ç è¦†ç›–ç‡>80%
- âœ… æ— è‡´å‘½/ä¸¥é‡ç¼ºé™·
- âœ… æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡
- âœ… å…¼å®¹æ€§è‰¯å¥½

**é—ç•™é—®é¢˜**:
- 3ä¸ªè½»å¾®ç±»å‹/è­¦å‘Šé—®é¢˜ï¼Œä¸å½±å“åŠŸèƒ½
- å»ºè®®åœ¨è”è°ƒé˜¶æ®µå‰ä¿®å¤

---

## å…«ã€é™„ä»¶

### 8.1 æµ‹è¯•æ–‡ä»¶æ¸…å•

```
frontend/
â”œâ”€â”€ vitest.config.ts
â”œâ”€â”€ playwright.config.ts
â”œâ”€â”€ src/tests/
â”‚   â”œâ”€â”€ setup.ts
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ sse.test.ts
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ MessageItem.test.tsx
â”‚   â”‚   â””â”€â”€ ExecutionPanel.test.tsx
â”‚   â””â”€â”€ integration/
â”‚       â””â”€â”€ api.integration.test.ts
â””â”€â”€ e2e/
    â”œâ”€â”€ chat.spec.ts
    â””â”€â”€ settings.spec.ts
```

### 8.2 æµ‹è¯•æ‰§è¡Œå‘½ä»¤

```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
npm test

# è¿è¡ŒE2Eæµ‹è¯•
npm run test:e2e

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

---

**æµ‹è¯•äººå‘˜**: å°æ–°  
**å®¡æŸ¥äººå‘˜**: ï¼ˆå¾…å¡«å†™ï¼‰  
**æŠ¥å‘Šæ—¶é—´**: 2026-02-18 06:40:00  
**æŠ¥å‘ŠçŠ¶æ€**: ğŸŸ¢ **æµ‹è¯•é€šè¿‡**
